# Быстрая интеграция системы команд с комнатной системой

## Минимальные шаги для запуска

### 1. Настройка на персонаже

1. Добавьте на персонажа компонент `RoomPlayerInputCommandHandler`
2. В Inspector укажите:
   - PlayerTransform: трансформ вашего персонажа
   - RoomGrid: ссылку на `DualLayerTile[,]` текущей комнаты

### 2. Настройка сетки комнаты

Привяжите сетку текущей комнаты к обработчику команд:

```csharp
// В вашем контроллере комнаты
_roomPlayerInputHandler.SetRoomGrid(currentRoom.Grid);
```

### 3. Проверка работы

- Используйте WASD или стрелки для перемещения
- Убедитесь, что персонаж перемещается только по проходимым клеткам
- Проверьте, что после хода начинается ход врагов

## Основные особенности

- `RoomMoveCommand` автоматически проверяет `BaseTile.IsWalkable`
- Анимация перемещения работает с вашей системой координат
- История команд позволяет отменять действия (Ctrl+Z)
- Система поддерживает очередь ходов (игрок → враги)

## Распространенные проблемы

1. **Персонаж не двигается**: проверьте, что `DualLayerTile[,]` правильно передан в обработчик
2. **Движение в непроходимые клетки**: проверьте значение `IsWalkable` у `BaseTile`
3. **Нет смены хода**: убедитесь, что `TurnSystem` и `GameManager` инициализированы

## Готово!

Ваша система команд интегрирована с комнатной системой на основе `DualLayerTile[,]`.